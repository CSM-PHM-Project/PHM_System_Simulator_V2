package com.csm.rover.simulator.wrapper;

import com.csm.rover.simulator.control.InterfaceAccess;
import com.csm.rover.simulator.control.InterfacePanel;
import com.csm.rover.simulator.map.PlanetParametersList;
import com.csm.rover.simulator.map.TerrainMap;
import com.csm.rover.simulator.map.display.LandMapPanel;
import com.csm.rover.simulator.objects.DecimalPoint;
import com.csm.rover.simulator.objects.FreeThread;
import com.csm.rover.simulator.rover.RoverHub;
import com.csm.rover.simulator.rover.RoverObject;
import com.csm.rover.simulator.rover.autoCode.*;
import com.csm.rover.simulator.rover.phsicsModels.FailOnHazard;
import com.csm.rover.simulator.rover.phsicsModels.RiskOnHazard;
import com.csm.rover.simulator.rover.phsicsModels.RoverPhysicsModel;
import com.csm.rover.simulator.satellite.SatelliteAutonomusCode;
import com.csm.rover.simulator.satellite.SatelliteHub;
import com.csm.rover.simulator.satellite.SatelliteObject;
import com.csm.rover.simulator.satellite.SatelliteParametersList;
import com.csm.rover.simulator.visual.AccelPopUp;
import com.csm.rover.simulator.visual.Form;
import com.csm.rover.simulator.visual.Panel;
import com.csm.rover.simulator.visual.StartupPanel;

import java.awt.*;
import java.util.ArrayList;

public class HiForm implements HumanInterfaceAbstraction {

    private boolean init;

    private Form GUI;
    private StartupPanel startupPnl;

    private MainWrapper wrapperPnl;
    private Panel orbitalPnl;
    private LandMapPanel terrainPnl;
    private InterfacePanel interfacePnl;
    private RoverHub roverHubPnl;
    private SatelliteHub satelliteHubPnl;

    private AccelPopUp informer;

    public HiForm(){
        init = false;
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        startupPnl = new StartupPanel(screenSize);
        GUI = new Form(screenSize, startupPnl);
        setUpSelectionLists();
        GUI.setVisible(true);
    }

    @Override
    public void initialize(NamesAndTags namesAndTags, SerialBuffers buffers, ArrayList<RoverObject> rovers, ArrayList<SatelliteObject> satellites, TerrainMap map) {
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        wrapperPnl = new MainWrapper(screenSize, buffers, namesAndTags);
        orbitalPnl = new Panel(screenSize, "Orbital View");
        roverHubPnl = new RoverHub(screenSize, buffers, rovers, map);
        terrainPnl = new LandMapPanel(screenSize, new PlanetParametersList(), roverHubPnl, rovers, map);
        interfacePnl = new InterfacePanel(screenSize, buffers);
        satelliteHubPnl = new SatelliteHub(screenSize, satellites);
        GUI.setRunTimePanels(wrapperPnl, orbitalPnl, terrainPnl, interfacePnl, roverHubPnl, satelliteHubPnl);
        init = true;
        InterfaceAccess.CODE.setCallTags(namesAndTags);
        roverHubPnl.setIdentifiers(namesAndTags.getRoverTags(), namesAndTags.getSatelliteTags());
    }

    private void setUpSelectionLists(){
        //addItemToSelectionList(	name_on_list ,	object_to_add	);
        startupPnl.addItemToSelectionList("Default", new RoverPhysicsModel());
        startupPnl.addItemToSelectionList("Fail On Hazard", new FailOnHazard());
        startupPnl.addItemToSelectionList("Risk On Hazard", new RiskOnHazard());
        startupPnl.addItemToSelectionList("[null]", new BlankRoverAuto());
        startupPnl.addItemToSelectionList("Generic4", new GenericRover("Generic4", 4));
        startupPnl.addItemToSelectionList("RAIR", new RAIRcode());
        startupPnl.addItemToSelectionList("RAIR Control", new RAIRcodeControl());
        startupPnl.addItemToSelectionList("RAIR Risk Averse", new RAIRcodeRA());
        startupPnl.addItemToSelectionList("RAIR Risk Seeking", new RAIRcodeRS());
        startupPnl.addItemToSelectionList("RAIR Risk Temper", new RAIRcodeRT());
        startupPnl.addItemToSelectionList("PIDAA", new PIDAAcode3());
        startupPnl.addItemToSelectionList("PIDAA CONTROL", new PIDAAcontrol());
        startupPnl.addItemToSelectionList("GORARO Simp", new GORAROcode1());
        startupPnl.addItemToSelectionList("GORADRO Adv", new GORAROAdvanceCode(new double[]{
                10000, 19, 82, 0.266, 0
        }));
        /*wrapperPnl.addItemToSelectionList("GORARO Adv B", new GORAROAdvanceCode(new double[]{
                10000, 80.44, 972.8, 25.84, 0
        }));
        wrapperPnl.addItemToSelectionList("GORARO Adv C", new GORAROAdvanceCode(new double[]{
                10000, 100, 500, 2, 0
        }));
        wrapperPnl.addItemToSelectionList("GORARO Adv D", new GORAROAdvanceCode(new double[]{
                10000, 40, 600, 2, 0
        }));
        wrapperPnl.addItemToSelectionList("GORARO Adv E", new GORAROAdvanceCode(new double[]{
                10000, 70, 600, 2, 0
        }));
        wrapperPnl.addItemToSelectionList("GORARO Adv F", new GORAROAdvanceCode(new double[]{
                10000, 100, 600, 2, 0
        }));
        wrapperPnl.addItemToSelectionList("GORARO Adv G", new GORAROAdvanceCode(new double[]{
                10000, 40, 700, 2, 0
        }));
        wrapperPnl.addItemToSelectionList("GORARO Adv H", new GORAROAdvanceCode(new double[]{
                10000, 70, 700, 2, 0
        }));*/
        startupPnl.addItemToSelectionList("MER", new MER(new DecimalPoint[]{
                new DecimalPoint(-9.5, -9.5),
                new DecimalPoint(-12.5, -5.5),
                new DecimalPoint(-17.5, -9.5),
                new DecimalPoint(-10.5, -16.5),
                new DecimalPoint(-2.5, -38.5),
                new DecimalPoint(8.5, -37.5),
                new DecimalPoint(15.5, -36.5),
                new DecimalPoint(21.5, -49.5),
                new DecimalPoint(22.5, -60.5),
                new DecimalPoint(23.5, -70.5),
                new DecimalPoint(14.5, -65.5),
                new DecimalPoint(13.5, -81.5),
                new DecimalPoint(6.5, -81.5),
                new DecimalPoint(2.5, -77.5),
                new DecimalPoint(3.5, -83.5),
                new DecimalPoint(0.5, -89.5),
                new DecimalPoint(-30.5, -109.5),
                new DecimalPoint(-26.5, -117.5),
                new DecimalPoint(-43.5, -127.5),
                new DecimalPoint(-54.5, -146.5),
                new DecimalPoint(-54.5, -149.5),
                new DecimalPoint(-57.5, -147.5),
                new DecimalPoint(-56.5, -159.5),
                new DecimalPoint(-59.5, -160.5),
                new DecimalPoint(-64.5, -165.5),
                new DecimalPoint(-61.5, -174.5),
                new DecimalPoint(-55.5, -182.5),
                new DecimalPoint(-57.5, -184.5),
                new DecimalPoint(-59.5, -189.5),
                new DecimalPoint(-43.5, -193.5),
                new DecimalPoint(-39.5, -190.5),
                new DecimalPoint(-38.5, -200.5),
                new DecimalPoint(-24.5, -198.5),
                new DecimalPoint(-25.5, -193.5),
                new DecimalPoint(-38.5, -212.5),
                new DecimalPoint(-21.5, -219.5),
                new DecimalPoint(-8.5, -223.5),
                new DecimalPoint(-4.5, -224.5),
                new DecimalPoint(-5.5, -227.5)
        }));
        startupPnl.addItemToSelectionList("GORADRO-G 2 2.356-1", new GORADROGuided(new Point[]{
                new Point(50,51),
                new Point(53,53),
                new Point(56,55),
                new Point(59,57),
                new Point(61,60),
                new Point(63,63),
                new Point(65,66),
                new Point(68,66),
                new Point(72,65),
                new Point(76,64),
                new Point(78,61),
                new Point(81,59),
                new Point(83,56),
                new Point(86,54),
                new Point(85,52),
                new Point(84,48),
                new Point(84,43),
                new Point(81,41),
                new Point(79,38),
                new Point(76,36),
                new Point(73,34),
                new Point(72,36),
                new Point(69,38),
                new Point(67,41),
                new Point(62,41),
                new Point(58,42),
                new Point(54,43),
                new Point(52,46),
                new Point(49,48),
                new Point(47,51),
                new Point(45,54),
                new Point(43,57),
                new Point(41,60),
                new Point(38,62),
                new Point(36,65),
                new Point(33,67),
                new Point(29,66),
                new Point(24,66),
                new Point(23,62),
                new Point(20,60),
                new Point(17,58),
                new Point(15,55),
                new Point(14,53),
                new Point(14,48),
                new Point(16,45),
                new Point(18,42),
                new Point(20,39),
                new Point(23,37),
                new Point(25,34),
                new Point(29,33),
                new Point(34,33),
                new Point(36,36),
                new Point(39,38),
                new Point(41,41),
                new Point(43,44),
                new Point(46,46),
                new Point(47,50),
                new Point(50,52),
                new Point(53,54),
                new Point(56,56),
                new Point(59,58),
                new Point(61,61),
                new Point(64,63),
                new Point(66,66),
                new Point(66,69),
                new Point(66,74),
                new Point(63,76),
                new Point(62,80),
                new Point(58,81),
                new Point(56,84),
                new Point(53,86),
                new Point(51,85),
                new Point(46,85),
                new Point(43,83),
                new Point(41,80),
                new Point(38,78),
                new Point(36,75),
                new Point(33,73),
                new Point(35,70),
                new Point(39,69),
                new Point(40,65),
                new Point(40,60),
                new Point(43,58),
                new Point(45,55),
                new Point(47,52),
                new Point(50,50),
                new Point(53,48),
                new Point(55,45),
                new Point(57,42),
                new Point(61,41),
                new Point(62,37),
                new Point(65,35),
                new Point(67,32),
                new Point(67,27),
                new Point(64,25),
                new Point(63,21),
                new Point(59,20),
                new Point(57,17),
                new Point(55,14),
                new Point(51,13),
                new Point(48,15),
                new Point(44,16),
                new Point(41,18),
                new Point(39,21),
                new Point(37,24),
                new Point(34,26),
                new Point(33,30),
                new Point(34,34),
                new Point(36,37),
                new Point(39,39),
                new Point(41,42),
                new Point(44,44),
                new Point(47,46)
        }, 2.356));
        startupPnl.addItemToSelectionList("GORADRO-G 2 2.356-2", new GORADROGuided(new Point[]{
                new Point(50,51),
                new Point(53,53),
                new Point(56,55),
                new Point(59,57),
                new Point(61,60),
                new Point(63,63),
                new Point(65,66),
                new Point(68,66),
                new Point(72,65),
                new Point(76,64),
                new Point(78,61),
                new Point(81,59),
                new Point(83,56),
                new Point(86,54),
                new Point(85,52),
                new Point(84,48),
                new Point(84,43),
                new Point(81,41),
                new Point(79,38),
                new Point(76,36),
                new Point(73,34),
                new Point(72,36),
                new Point(69,38),
                new Point(67,41),
                new Point(62,41),
                new Point(58,42),
                new Point(54,43),
                new Point(52,46),
                new Point(49,48),
                new Point(47,51),
                new Point(45,54),
                new Point(43,57),
                new Point(41,60),
                new Point(38,62),
                new Point(36,65),
                new Point(33,67),
                new Point(29,66),
                new Point(24,66),
                new Point(23,62),
                new Point(20,60),
                new Point(17,58),
                new Point(15,55),
                new Point(14,53),
                new Point(14,48),
                new Point(16,45),
                new Point(18,42),
                new Point(20,39),
                new Point(23,37),
                new Point(25,34),
                new Point(29,33),
                new Point(34,33),
                new Point(36,36),
                new Point(39,38),
                new Point(41,41),
                new Point(43,44),
                new Point(46,46),
                new Point(47,50),
                new Point(50,52),
                new Point(53,54),
                new Point(56,56),
                new Point(59,58),
                new Point(61,61),
                new Point(64,63),
                new Point(66,66),
                new Point(66,69),
                new Point(66,74),
                new Point(63,76),
                new Point(62,80),
                new Point(58,81),
                new Point(56,84),
                new Point(53,86),
                new Point(51,85),
                new Point(46,85),
                new Point(43,83),
                new Point(41,80),
                new Point(38,78),
                new Point(36,75),
                new Point(33,73),
                new Point(35,70),
                new Point(39,69),
                new Point(40,65),
                new Point(40,60),
                new Point(43,58),
                new Point(45,55),
                new Point(47,52),
                new Point(50,50),
                new Point(53,48),
                new Point(55,45),
                new Point(57,42),
                new Point(61,41),
                new Point(62,37),
                new Point(65,35),
                new Point(67,32),
                new Point(67,27),
                new Point(64,25),
                new Point(63,21),
                new Point(59,20),
                new Point(57,17),
                new Point(55,14),
                new Point(51,13),
                new Point(48,15),
                new Point(44,16),
                new Point(41,18),
                new Point(39,21),
                new Point(37,24),
                new Point(34,26),
                new Point(33,30),
                new Point(34,34),
                new Point(36,37),
                new Point(39,39),
                new Point(41,42),
                new Point(44,44),
                new Point(47,46)
        }, 2.356));
        startupPnl.addItemToSelectionList("GORADRO-G 2 2.356-3", new GORADROGuided(new Point[]{
                new Point(50,51),
                new Point(53,53),
                new Point(56,55),
                new Point(59,57),
                new Point(61,60),
                new Point(63,63),
                new Point(65,66),
                new Point(68,66),
                new Point(72,65),
                new Point(76,64),
                new Point(78,61),
                new Point(81,59),
                new Point(83,56),
                new Point(86,54),
                new Point(85,52),
                new Point(84,48),
                new Point(84,43),
                new Point(81,41),
                new Point(79,38),
                new Point(76,36),
                new Point(73,34),
                new Point(72,36),
                new Point(69,38),
                new Point(67,41),
                new Point(62,41),
                new Point(58,42),
                new Point(54,43),
                new Point(52,46),
                new Point(49,48),
                new Point(47,51),
                new Point(45,54),
                new Point(43,57),
                new Point(41,60),
                new Point(38,62),
                new Point(36,65),
                new Point(33,67),
                new Point(29,66),
                new Point(24,66),
                new Point(23,62),
                new Point(20,60),
                new Point(17,58),
                new Point(15,55),
                new Point(14,53),
                new Point(14,48),
                new Point(16,45),
                new Point(18,42),
                new Point(20,39),
                new Point(23,37),
                new Point(25,34),
                new Point(29,33),
                new Point(34,33),
                new Point(36,36),
                new Point(39,38),
                new Point(41,41),
                new Point(43,44),
                new Point(46,46),
                new Point(47,50),
                new Point(50,52),
                new Point(53,54),
                new Point(56,56),
                new Point(59,58),
                new Point(61,61),
                new Point(64,63),
                new Point(66,66),
                new Point(66,69),
                new Point(66,74),
                new Point(63,76),
                new Point(62,80),
                new Point(58,81),
                new Point(56,84),
                new Point(53,86),
                new Point(51,85),
                new Point(46,85),
                new Point(43,83),
                new Point(41,80),
                new Point(38,78),
                new Point(36,75),
                new Point(33,73),
                new Point(35,70),
                new Point(39,69),
                new Point(40,65),
                new Point(40,60),
                new Point(43,58),
                new Point(45,55),
                new Point(47,52),
                new Point(50,50),
                new Point(53,48),
                new Point(55,45),
                new Point(57,42),
                new Point(61,41),
                new Point(62,37),
                new Point(65,35),
                new Point(67,32),
                new Point(67,27),
                new Point(64,25),
                new Point(63,21),
                new Point(59,20),
                new Point(57,17),
                new Point(55,14),
                new Point(51,13),
                new Point(48,15),
                new Point(44,16),
                new Point(41,18),
                new Point(39,21),
                new Point(37,24),
                new Point(34,26),
                new Point(33,30),
                new Point(34,34),
                new Point(36,37),
                new Point(39,39),
                new Point(41,42),
                new Point(44,44),
                new Point(47,46)
        }, 2.356));
        startupPnl.addItemToSelectionList("GORADRO-G 2 2.356-4", new GORADROGuided(new Point[]{
                new Point(50,51),
                new Point(53,53),
                new Point(56,55),
                new Point(59,57),
                new Point(61,60),
                new Point(63,63),
                new Point(65,66),
                new Point(68,66),
                new Point(72,65),
                new Point(76,64),
                new Point(78,61),
                new Point(81,59),
                new Point(83,56),
                new Point(86,54),
                new Point(85,52),
                new Point(84,48),
                new Point(84,43),
                new Point(81,41),
                new Point(79,38),
                new Point(76,36),
                new Point(73,34),
                new Point(72,36),
                new Point(69,38),
                new Point(67,41),
                new Point(62,41),
                new Point(58,42),
                new Point(54,43),
                new Point(52,46),
                new Point(49,48),
                new Point(47,51),
                new Point(45,54),
                new Point(43,57),
                new Point(41,60),
                new Point(38,62),
                new Point(36,65),
                new Point(33,67),
                new Point(29,66),
                new Point(24,66),
                new Point(23,62),
                new Point(20,60),
                new Point(17,58),
                new Point(15,55),
                new Point(14,53),
                new Point(14,48),
                new Point(16,45),
                new Point(18,42),
                new Point(20,39),
                new Point(23,37),
                new Point(25,34),
                new Point(29,33),
                new Point(34,33),
                new Point(36,36),
                new Point(39,38),
                new Point(41,41),
                new Point(43,44),
                new Point(46,46),
                new Point(47,50),
                new Point(50,52),
                new Point(53,54),
                new Point(56,56),
                new Point(59,58),
                new Point(61,61),
                new Point(64,63),
                new Point(66,66),
                new Point(66,69),
                new Point(66,74),
                new Point(63,76),
                new Point(62,80),
                new Point(58,81),
                new Point(56,84),
                new Point(53,86),
                new Point(51,85),
                new Point(46,85),
                new Point(43,83),
                new Point(41,80),
                new Point(38,78),
                new Point(36,75),
                new Point(33,73),
                new Point(35,70),
                new Point(39,69),
                new Point(40,65),
                new Point(40,60),
                new Point(43,58),
                new Point(45,55),
                new Point(47,52),
                new Point(50,50),
                new Point(53,48),
                new Point(55,45),
                new Point(57,42),
                new Point(61,41),
                new Point(62,37),
                new Point(65,35),
                new Point(67,32),
                new Point(67,27),
                new Point(64,25),
                new Point(63,21),
                new Point(59,20),
                new Point(57,17),
                new Point(55,14),
                new Point(51,13),
                new Point(48,15),
                new Point(44,16),
                new Point(41,18),
                new Point(39,21),
                new Point(37,24),
                new Point(34,26),
                new Point(33,30),
                new Point(34,34),
                new Point(36,37),
                new Point(39,39),
                new Point(41,42),
                new Point(44,44),
                new Point(47,46)
        }, 2.356));
        startupPnl.addItemToSelectionList("GORADRO-G 2 2.356-5", new GORADROGuided(new Point[]{
                new Point(50,51),
                new Point(53,53),
                new Point(56,55),
                new Point(59,57),
                new Point(61,60),
                new Point(63,63),
                new Point(65,66),
                new Point(68,66),
                new Point(72,65),
                new Point(76,64),
                new Point(78,61),
                new Point(81,59),
                new Point(83,56),
                new Point(86,54),
                new Point(85,52),
                new Point(84,48),
                new Point(84,43),
                new Point(81,41),
                new Point(79,38),
                new Point(76,36),
                new Point(73,34),
                new Point(72,36),
                new Point(69,38),
                new Point(67,41),
                new Point(62,41),
                new Point(58,42),
                new Point(54,43),
                new Point(52,46),
                new Point(49,48),
                new Point(47,51),
                new Point(45,54),
                new Point(43,57),
                new Point(41,60),
                new Point(38,62),
                new Point(36,65),
                new Point(33,67),
                new Point(29,66),
                new Point(24,66),
                new Point(23,62),
                new Point(20,60),
                new Point(17,58),
                new Point(15,55),
                new Point(14,53),
                new Point(14,48),
                new Point(16,45),
                new Point(18,42),
                new Point(20,39),
                new Point(23,37),
                new Point(25,34),
                new Point(29,33),
                new Point(34,33),
                new Point(36,36),
                new Point(39,38),
                new Point(41,41),
                new Point(43,44),
                new Point(46,46),
                new Point(47,50),
                new Point(50,52),
                new Point(53,54),
                new Point(56,56),
                new Point(59,58),
                new Point(61,61),
                new Point(64,63),
                new Point(66,66),
                new Point(66,69),
                new Point(66,74),
                new Point(63,76),
                new Point(62,80),
                new Point(58,81),
                new Point(56,84),
                new Point(53,86),
                new Point(51,85),
                new Point(46,85),
                new Point(43,83),
                new Point(41,80),
                new Point(38,78),
                new Point(36,75),
                new Point(33,73),
                new Point(35,70),
                new Point(39,69),
                new Point(40,65),
                new Point(40,60),
                new Point(43,58),
                new Point(45,55),
                new Point(47,52),
                new Point(50,50),
                new Point(53,48),
                new Point(55,45),
                new Point(57,42),
                new Point(61,41),
                new Point(62,37),
                new Point(65,35),
                new Point(67,32),
                new Point(67,27),
                new Point(64,25),
                new Point(63,21),
                new Point(59,20),
                new Point(57,17),
                new Point(55,14),
                new Point(51,13),
                new Point(48,15),
                new Point(44,16),
                new Point(41,18),
                new Point(39,21),
                new Point(37,24),
                new Point(34,26),
                new Point(33,30),
                new Point(34,34),
                new Point(36,37),
                new Point(39,39),
                new Point(41,42),
                new Point(44,44),
                new Point(47,46)
        }, 2.356));
        startupPnl.addItemToSelectionList("GORADRO-G 2 2.356-6", new GORADROGuided(new Point[]{
                new Point(50,51),
                new Point(53,53),
                new Point(56,55),
                new Point(59,57),
                new Point(61,60),
                new Point(63,63),
                new Point(65,66),
                new Point(68,66),
                new Point(72,65),
                new Point(76,64),
                new Point(78,61),
                new Point(81,59),
                new Point(83,56),
                new Point(86,54),
                new Point(85,52),
                new Point(84,48),
                new Point(84,43),
                new Point(81,41),
                new Point(79,38),
                new Point(76,36),
                new Point(73,34),
                new Point(72,36),
                new Point(69,38),
                new Point(67,41),
                new Point(62,41),
                new Point(58,42),
                new Point(54,43),
                new Point(52,46),
                new Point(49,48),
                new Point(47,51),
                new Point(45,54),
                new Point(43,57),
                new Point(41,60),
                new Point(38,62),
                new Point(36,65),
                new Point(33,67),
                new Point(29,66),
                new Point(24,66),
                new Point(23,62),
                new Point(20,60),
                new Point(17,58),
                new Point(15,55),
                new Point(14,53),
                new Point(14,48),
                new Point(16,45),
                new Point(18,42),
                new Point(20,39),
                new Point(23,37),
                new Point(25,34),
                new Point(29,33),
                new Point(34,33),
                new Point(36,36),
                new Point(39,38),
                new Point(41,41),
                new Point(43,44),
                new Point(46,46),
                new Point(47,50),
                new Point(50,52),
                new Point(53,54),
                new Point(56,56),
                new Point(59,58),
                new Point(61,61),
                new Point(64,63),
                new Point(66,66),
                new Point(66,69),
                new Point(66,74),
                new Point(63,76),
                new Point(62,80),
                new Point(58,81),
                new Point(56,84),
                new Point(53,86),
                new Point(51,85),
                new Point(46,85),
                new Point(43,83),
                new Point(41,80),
                new Point(38,78),
                new Point(36,75),
                new Point(33,73),
                new Point(35,70),
                new Point(39,69),
                new Point(40,65),
                new Point(40,60),
                new Point(43,58),
                new Point(45,55),
                new Point(47,52),
                new Point(50,50),
                new Point(53,48),
                new Point(55,45),
                new Point(57,42),
                new Point(61,41),
                new Point(62,37),
                new Point(65,35),
                new Point(67,32),
                new Point(67,27),
                new Point(64,25),
                new Point(63,21),
                new Point(59,20),
                new Point(57,17),
                new Point(55,14),
                new Point(51,13),
                new Point(48,15),
                new Point(44,16),
                new Point(41,18),
                new Point(39,21),
                new Point(37,24),
                new Point(34,26),
                new Point(33,30),
                new Point(34,34),
                new Point(36,37),
                new Point(39,39),
                new Point(41,42),
                new Point(44,44),
                new Point(47,46)
        }, 2.356));
        startupPnl.addItemToSelectionList("GORADRO-G 2 2.356-7", new GORADROGuided(new Point[]{
                new Point(50,51),
                new Point(53,53),
                new Point(56,55),
                new Point(59,57),
                new Point(61,60),
                new Point(63,63),
                new Point(65,66),
                new Point(68,66),
                new Point(72,65),
                new Point(76,64),
                new Point(78,61),
                new Point(81,59),
                new Point(83,56),
                new Point(86,54),
                new Point(85,52),
                new Point(84,48),
                new Point(84,43),
                new Point(81,41),
                new Point(79,38),
                new Point(76,36),
                new Point(73,34),
                new Point(72,36),
                new Point(69,38),
                new Point(67,41),
                new Point(62,41),
                new Point(58,42),
                new Point(54,43),
                new Point(52,46),
                new Point(49,48),
                new Point(47,51),
                new Point(45,54),
                new Point(43,57),
                new Point(41,60),
                new Point(38,62),
                new Point(36,65),
                new Point(33,67),
                new Point(29,66),
                new Point(24,66),
                new Point(23,62),
                new Point(20,60),
                new Point(17,58),
                new Point(15,55),
                new Point(14,53),
                new Point(14,48),
                new Point(16,45),
                new Point(18,42),
                new Point(20,39),
                new Point(23,37),
                new Point(25,34),
                new Point(29,33),
                new Point(34,33),
                new Point(36,36),
                new Point(39,38),
                new Point(41,41),
                new Point(43,44),
                new Point(46,46),
                new Point(47,50),
                new Point(50,52),
                new Point(53,54),
                new Point(56,56),
                new Point(59,58),
                new Point(61,61),
                new Point(64,63),
                new Point(66,66),
                new Point(66,69),
                new Point(66,74),
                new Point(63,76),
                new Point(62,80),
                new Point(58,81),
                new Point(56,84),
                new Point(53,86),
                new Point(51,85),
                new Point(46,85),
                new Point(43,83),
                new Point(41,80),
                new Point(38,78),
                new Point(36,75),
                new Point(33,73),
                new Point(35,70),
                new Point(39,69),
                new Point(40,65),
                new Point(40,60),
                new Point(43,58),
                new Point(45,55),
                new Point(47,52),
                new Point(50,50),
                new Point(53,48),
                new Point(55,45),
                new Point(57,42),
                new Point(61,41),
                new Point(62,37),
                new Point(65,35),
                new Point(67,32),
                new Point(67,27),
                new Point(64,25),
                new Point(63,21),
                new Point(59,20),
                new Point(57,17),
                new Point(55,14),
                new Point(51,13),
                new Point(48,15),
                new Point(44,16),
                new Point(41,18),
                new Point(39,21),
                new Point(37,24),
                new Point(34,26),
                new Point(33,30),
                new Point(34,34),
                new Point(36,37),
                new Point(39,39),
                new Point(41,42),
                new Point(44,44),
                new Point(47,46)
        }, 2.356));
        startupPnl.addItemToSelectionList("GORADRO-G 2 2.356-8", new GORADROGuided(new Point[]{
                new Point(50,51),
                new Point(53,53),
                new Point(56,55),
                new Point(59,57),
                new Point(61,60),
                new Point(63,63),
                new Point(65,66),
                new Point(68,66),
                new Point(72,65),
                new Point(76,64),
                new Point(78,61),
                new Point(81,59),
                new Point(83,56),
                new Point(86,54),
                new Point(85,52),
                new Point(84,48),
                new Point(84,43),
                new Point(81,41),
                new Point(79,38),
                new Point(76,36),
                new Point(73,34),
                new Point(72,36),
                new Point(69,38),
                new Point(67,41),
                new Point(62,41),
                new Point(58,42),
                new Point(54,43),
                new Point(52,46),
                new Point(49,48),
                new Point(47,51),
                new Point(45,54),
                new Point(43,57),
                new Point(41,60),
                new Point(38,62),
                new Point(36,65),
                new Point(33,67),
                new Point(29,66),
                new Point(24,66),
                new Point(23,62),
                new Point(20,60),
                new Point(17,58),
                new Point(15,55),
                new Point(14,53),
                new Point(14,48),
                new Point(16,45),
                new Point(18,42),
                new Point(20,39),
                new Point(23,37),
                new Point(25,34),
                new Point(29,33),
                new Point(34,33),
                new Point(36,36),
                new Point(39,38),
                new Point(41,41),
                new Point(43,44),
                new Point(46,46),
                new Point(47,50),
                new Point(50,52),
                new Point(53,54),
                new Point(56,56),
                new Point(59,58),
                new Point(61,61),
                new Point(64,63),
                new Point(66,66),
                new Point(66,69),
                new Point(66,74),
                new Point(63,76),
                new Point(62,80),
                new Point(58,81),
                new Point(56,84),
                new Point(53,86),
                new Point(51,85),
                new Point(46,85),
                new Point(43,83),
                new Point(41,80),
                new Point(38,78),
                new Point(36,75),
                new Point(33,73),
                new Point(35,70),
                new Point(39,69),
                new Point(40,65),
                new Point(40,60),
                new Point(43,58),
                new Point(45,55),
                new Point(47,52),
                new Point(50,50),
                new Point(53,48),
                new Point(55,45),
                new Point(57,42),
                new Point(61,41),
                new Point(62,37),
                new Point(65,35),
                new Point(67,32),
                new Point(67,27),
                new Point(64,25),
                new Point(63,21),
                new Point(59,20),
                new Point(57,17),
                new Point(55,14),
                new Point(51,13),
                new Point(48,15),
                new Point(44,16),
                new Point(41,18),
                new Point(39,21),
                new Point(37,24),
                new Point(34,26),
                new Point(33,30),
                new Point(34,34),
                new Point(36,37),
                new Point(39,39),
                new Point(41,42),
                new Point(44,44),
                new Point(47,46)
        }, 2.356));
        //wrapperPnl.addItemToSelectionList(		"PIDAA 2",		new PIDAAcode2());
        startupPnl.addItemToSelectionList("[null]", (SatelliteAutonomusCode) null);
        startupPnl.addItemToSelectionList("[null]", (SatelliteParametersList) null);
        startupPnl.addItemToSelectionList("GORADRO-G", new GORADROGuided(new Point[]{
                new Point(20, 20),
                new Point(10, -15),
                new Point(0, 0)
        }, Math.PI/6.));
    }

    @Override
    public void start(){
        interfacePnl.CODE.start();
        roverHubPnl.start();
        satelliteHubPnl.start();
    }

    @Override
    public void updateRovers() {
        if (init){
            roverHubPnl.updateDisplays();
        }
    }

    @Override
    public void updateSatellites() {
        if (init){
            satelliteHubPnl.updateDisplays();
        }
    }

    @Override
    public void updateRover(String name, DecimalPoint location, double direction) {
        if (init){
            terrainPnl.updateRover(name, location, direction);
        }
    }

    @Override
    public void updateSatellite(String name) {

    }

    @Override
    public void updateSerialBuffers() {
        if (init){
            wrapperPnl.updateSerialDisplays();
        }
    }

    @Override
    public void viewAccelerated(int runtime, double accelerant) {
        if (init){
            GUI.setVisible(false);
            informer = new AccelPopUp(runtime, (int) (runtime/accelerant/60000));
            new FreeThread(1000, new Runnable(){
                public void run(){
                    informer.update((int) Globals.getInstance().timeMillis);
                }
            }, FreeThread.FOREVER, "accel-pop-up");
        }
    }

    @Override
    public void exit(){
        GUI.exit();
    }
}
